---
title: "Appendix Plots"
author: "Sophie Castel"
date: "3/9/2020"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
newag <- load_obj("/home/sophie/sophTools/files/new_1/new.ag.rda")
```

\section{Figures}

\subsection{NRMSD}
```{r}
crit = "NRMSD"
```

\subsubsection{Surface Plots}
```{r}
multiSurface(agEval = newag, layer_type = "method", crit = crit, highlight = "HWI", m = c("KAF","EWMA","HWI"))
```

\subsubsection{Collapsed Cross-Section Plots}
```{r}
#P
setwd("/home/sophie/sophTools/files/new_1")
png(paste0(crit,"CSbyMethod_p.png"), width = 1000, height = 1100)
multiCS(agEval = newag, layer_type = "method", crit = crit, cross_section = "p", highlight = "HWI", m = c("KAF","EWMA","HWI"))
dev.off()
```

```{r}
#G
setwd("/home/sophie/sophTools/files/new_1")
png(paste0(crit,"CSbyMethod_g.png"), width = 1000, height = 1100)
multiCS(agEval = newag, layer_type = "method", crit = crit, cross_section = "g", highlight = "HWI", m = c("KAF","EWMA","HWI"))
dev.off()
```

\subsubsection{Uncollapsed Cross-Section Plots}
```{r}
# P
plotCSBars(agEval = newag, layer_type = "method", crit = crit, cross_section = "p", m = c("HWI","KAF","EWMA"), highlight = "HWI", d = 2)
plotCSBars(agEval = newag, layer_type = "method", crit = crit, cross_section = "p", m = c("HWI","KAF","EWMA"), highlight = "HWI", d = 3)
plotCSBars(agEval = newag, layer_type = "method", crit = crit, cross_section = "p", m = c("HWI","KAF","EWMA"), highlight = "HWI", d = 4)
plotCSBars(agEval = newag, layer_type = "method", crit = crit, cross_section = "p", m = c("HWI","KAF","EWMA"), highlight = "HWI", d = 5)
```

```{r}
# G
plotCSBars(agEval = newag, layer_type = "method", crit = crit, cross_section = "g", m = c("HWI","KAF","EWMA"), highlight = "HWI", d = 2)
plotCSBars(agEval = newag, layer_type = "method", crit = crit, cross_section = "g", m = c("HWI","KAF","EWMA"), highlight = "HWI", d = 3)
plotCSBars(agEval = newag, layer_type = "method", crit = crit, cross_section = "g", m = c("HWI","KAF","EWMA"), highlight = "HWI", d = 4)
plotCSBars(agEval = newag, layer_type = "method", crit = crit, cross_section = "g", m = c("HWI","KAF","EWMA"), highlight = "HWI", d = 5)
```

\subsubsection{Multi Heatmap Comparing Methods}
```{r}
setwd("/home/sophie/sophTools/files/new_1")

png(paste0(crit,"_median_heatmap_m.png"), width = 1000, height = 1000)
multiHeatmap(agEval = newag, crit = crit, m = c("HWI","KAF","EWMA"), by = "method", f = "median")
dev.off()

png(paste0(crit,"_iqr_heatmap_m.png"), width = 1000, height = 1000)
multiHeatmap(agEval = newag, crit = crit, m = c("HWI","KAF","EWMA"), by = "method", f = "iqr")
dev.off()

png(paste0("AD_iqr_heatmap_m.png"), width = 1000, height = 1000)
multiHeatmap(agEval = newag, crit = "abs_differences", m = c("HWI","KAF","EWMA"), by = "method", f = "iqr")
dev.off()
```

\subsubsection{Low Resolution Heatmap, HWI only}
```{r}
ag.lr <- load_obj("/home/sophie/sophTools/files/new_1/new.ag.rda")

setwd("/home/sophie/sophTools/files/new_1")
png(paste0(crit,"_Heatmap_lr.png"), width = 1136, height = 328)
heatmapGrid2(agEval = ag.lr, m = "HWI", crit = crit, f = "median")
dev.off()
```

\subsubsection{High Resolution Heatmap, HWI only}
```{r}
ag.hr <- load_obj("/home/sophie/sophTools/files/highRes/ag.hr.rda")

crit = "MdAPE"
setwd("/home/sophie/sophTools/files/new_1")
png(paste0(crit,"_Heatmap_hr.png"), width = 1136, height = 328)
heatmapGrid2(agEval = ag.hr, m = "HWI", crit = crit, f = "median")
dev.off()
```

\subsection{MdAPE}
```{r}
crit = "MdAPE"
```

\subsubsection{Surface Plots}
```{r}
multiSurface(agEval = newag, layer_type = "method", crit = crit, highlight = "HWI", m = c("KAF","EWMA","HWI"))
```

\subsubsection{Collapsed Cross-Section Plots}
```{r}
#P
setwd("/home/sophie/sophTools/files/new_1")
png(paste0(crit,"CSbyMethod_p.png"), width = 1000, height = 1100)
multiCS(agEval = newag, layer_type = "method", crit = crit, cross_section = "p", highlight = "HWI", m = c("KAF","EWMA","HWI"))
dev.off()
```

```{r}
#G
setwd("/home/sophie/sophTools/files/new_1")
png(paste0(crit,"CSbyMethod_g.png"), width = 1000, height = 1100)
multiCS(agEval = newag, layer_type = "method", crit = crit, cross_section = "g", highlight = "HWI", m = c("KAF","EWMA","HWI"))
dev.off()
```

\subsubsection{Uncollapsed Cross-Section Plots}
```{r}
# P
setwd("/home/sophie/sophTools/files/new_1/CSpUn/MdAPE")

png(paste0("D1",crit,"CSunbyMethod_p.png"), width = 1000, height = 1100)
plotCSBars(agEval = newag, layer_type = "method", crit = crit, cross_section = "p", m = c("HWI","KAF","EWMA"), highlight = "HWI", d = 1)
dev.off()

png(paste0("D2",crit,"CSunbyMethod_p.png"), width = 1000, height = 1100)
plotCSBars(agEval = newag, layer_type = "method", crit = crit, cross_section = "p", m = c("HWI","KAF","EWMA"), highlight = "HWI", d = 2)
dev.off()


png(paste0("D3",crit,"CSunbyMethod_p.png"), width = 1000, height = 1100)
plotCSBars(agEval = newag, layer_type = "method", crit = crit, cross_section = "p", m = c("HWI","KAF","EWMA"), highlight = "HWI", d = 3)
dev.off()


png(paste0("D4",crit,"CSunbyMethod_p.png"), width = 1000, height = 1100)
plotCSBars(agEval = newag, layer_type = "method", crit = crit, cross_section = "p", m = c("HWI","KAF","EWMA"), highlight = "HWI", d = 4)
dev.off()


png(paste0("D5",crit,"CSunbyMethod_p.png"), width = 1000, height = 1100)
plotCSBars(agEval = newag, layer_type = "method", crit = crit, cross_section = "p", m = c("HWI","KAF","EWMA"), highlight = "HWI", d = 5)
dev.off()
```

```{r}
# G
setwd("/home/sophie/sophTools/files/new_1/CSgUn/MdAPE")

png(paste0("D1",crit,"CSunbyMethod_g.png"), width = 1000, height = 1100)
plotCSBars(agEval = newag, layer_type = "method", crit = crit, cross_section = "g", m = c("HWI","KAF","EWMA"), highlight = "HWI", d = 1)
dev.off()

png(paste0("D2",crit,"CSunbyMethod_g.png"), width = 1000, height = 1100)
plotCSBars(agEval = newag, layer_type = "method", crit = crit, cross_section = "g", m = c("HWI","KAF","EWMA"), highlight = "HWI", d = 2)
dev.off()


png(paste0("D3",crit,"CSunbyMethod_g.png"), width = 1000, height = 1100)
plotCSBars(agEval = newag, layer_type = "method", crit = crit, cross_section = "g", m = c("HWI","KAF","EWMA"), highlight = "HWI", d = 3)
dev.off()


png(paste0("D4",crit,"CSunbyMethod_g.png"), width = 1000, height = 1100)
plotCSBars(agEval = newag, layer_type = "method", crit = crit, cross_section = "g", m = c("HWI","KAF","EWMA"), highlight = "HWI", d = 4)
dev.off()


png(paste0("D5",crit,"CSunbyMethod_g.png"), width = 1000, height = 1100)
plotCSBars(agEval = newag, layer_type = "method", crit = crit, cross_section = "g", m = c("HWI","KAF","EWMA"), highlight = "HWI", d = 5)
dev.off()
```

\subsubsection{Multi Heatmap Comparing Methods}
```{r}
multiHeatmap(agEval = newag, crit = crit, m = c("HWI","KAF","EWMA"), by = "method")
```

\section{Tables}

\subsection{NRMSD}
```{r}
crit = "NRMSD"
```

\subsection{Collapsed Cross-Sections}
```{r}
#P
bestTable(d = 1, agEval = newag, m = c("KAF","EWMA","HWI"), crit = crit, f = "median", cross_section = "p", layer_type = "method", collapse = T)
bestTable(d = 2, agEval = newag, m = c("KAF","EWMA","HWI"), crit = crit, f = "median", cross_section = "p", layer_type = "method", collapse = T)
bestTable(d = 3, agEval = newag, m = c("KAF","EWMA","HWI"), crit = crit, f = "median", cross_section = "p", layer_type = "method", collapse = T)
bestTable(d = 4, agEval = newag, m = c("KAF","EWMA","HWI"), crit = crit, f = "median", cross_section = "p", layer_type = "method", collapse = T)
bestTable(d = 5, agEval = newag, m = c("KAF","EWMA","HWI"), crit = crit, f = "median", cross_section = "p", layer_type = "method", collapse = T)
```

```{r}
#G
bestTable(d = 1, agEval = newag, m = c("KAF","EWMA","HWI"), crit = crit, f = "median", cross_section = "g", layer_type = "method", collapse = T)
bestTable(d = 2, agEval = newag, m = c("KAF","EWMA","HWI"), crit = crit, f = "median", cross_section = "g", layer_type = "method", collapse = T)
bestTable(d = 3, agEval = newag, m = c("KAF","EWMA","HWI"), crit = crit, f = "median", cross_section = "g", layer_type = "method", collapse = T)
bestTable(d = 4, agEval = newag, m = c("KAF","EWMA","HWI"), crit = crit, f = "median", cross_section = "g", layer_type = "method", collapse = T)
bestTable(d = 5, agEval = newag, m = c("KAF","EWMA","HWI"), crit = crit, f = "median", cross_section = "g", layer_type = "method", collapse = T)
```

\subsection{Zlists}
```{r}
zlist_median <- compileMatrix(newag)[["median"]]
zlist_q2.5 <- compileMatrix(newag)[["q2.5"]]
zlist_q97.5 <- compileMatrix(newag)[["q97.5"]]

#D1
xtable(zlist_q2.5$NRMSD$HWI$D1)
xtable(zlist_median$NRMSD$HWI$D1)
xtable(zlist_q97.5$NRMSD$HWI$D1)

#D2
xtable(zlist_q2.5$NRMSD$HWI$D2)
xtable(zlist_median$NRMSD$HWI$D2)
xtable(zlist_q97.5$NRMSD$HWI$D2)

#D3
xtable(zlist_q2.5$NRMSD$HWI$D3)
xtable(zlist_median$NRMSD$HWI$D3)
xtable(zlist_q97.5$NRMSD$HWI$D3)

#D4
xtable(zlist_q2.5$NRMSD$HWI$D4)
xtable(zlist_median$NRMSD$HWI$D4)
xtable(zlist_q97.5$NRMSD$HWI$D4)

#D5
xtable(zlist_q2.5$NRMSD$HWI$D5)
xtable(zlist_median$NRMSD$HWI$D5)
xtable(zlist_q97.5$NRMSD$HWI$D5)
```

\subsection{MdAPE}
```{r}
crit = "MdAPE"
```

\subsection{Collapsed Cross-Sections}
```{r}
#P
bestTable(d = 1, agEval = newag, m = c("KAF","EWMA","HWI"), crit = crit, f = "median", cross_section = "p", layer_type = "method", collapse = T)
bestTable(d = 2, agEval = newag, m = c("KAF","EWMA","HWI"), crit = crit, f = "median", cross_section = "p", layer_type = "method", collapse = T)
bestTable(d = 3, agEval = newag, m = c("KAF","EWMA","HWI"), crit = crit, f = "median", cross_section = "p", layer_type = "method", collapse = T)
bestTable(d = 4, agEval = newag, m = c("KAF","EWMA","HWI"), crit = crit, f = "median", cross_section = "p", layer_type = "method", collapse = T)
bestTable(d = 5, agEval = newag, m = c("KAF","EWMA","HWI"), crit = crit, f = "median", cross_section = "p", layer_type = "method", collapse = T)
```

```{r}
#G
bestTable(d = 1, agEval = newag, m = c("KAF","EWMA","HWI"), crit = crit, f = "median", cross_section = "g", layer_type = "method", collapse = T)
bestTable(d = 2, agEval = newag, m = c("KAF","EWMA","HWI"), crit = crit, f = "median", cross_section = "g", layer_type = "method", collapse = T)
bestTable(d = 3, agEval = newag, m = c("KAF","EWMA","HWI"), crit = crit, f = "median", cross_section = "g", layer_type = "method", collapse = T)
bestTable(d = 4, agEval = newag, m = c("KAF","EWMA","HWI"), crit = crit, f = "median", cross_section = "g", layer_type = "method", collapse = T)
bestTable(d = 5, agEval = newag, m = c("KAF","EWMA","HWI"), crit = crit, f = "median", cross_section = "g", layer_type = "method", collapse = T)
```

\subsection{Zlists}
```{r}
setwd("/home/sophie/sophTools/files/appendix")

#D1
ztable(agEval = newag, d = 1, m = "HWI", crit = crit, combine = F, output = "q2.5")
ztable(agEval = newag, d = 1, m = "HWI", crit = crit, combine = F, output = "median")
ztable(agEval = newag, d = 1, m = "HWI", crit = crit, combine = F, output = "q97.5")


#D2
xtable(zlist_q2.5$NRMSD$HWI$D2)
xtable(zlist_median$NRMSD$HWI$D2)
xtable(zlist_q97.5$NRMSD$HWI$D2)

#D3
xtable(zlist_q2.5$NRMSD$HWI$D3)
xtable(zlist_median$NRMSD$HWI$D3)
xtable(zlist_q97.5$NRMSD$HWI$D3)

#D4
xtable(zlist_q2.5$NRMSD$HWI$D4)
xtable(zlist_median$NRMSD$HWI$D4)
xtable(zlist_q97.5$NRMSD$HWI$D4)

#D5
xtable(zlist_q2.5$NRMSD$HWI$D5)
xtable(zlist_median$NRMSD$HWI$D5)
xtable(zlist_q97.5$NRMSD$HWI$D5)
```