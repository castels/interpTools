---
title: "dataTables"
author: "Sophie Castel"
date: "12/11/2019"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# SKEWS
```{r}
skewTab <- plotSkew(agEval = testag, output = "table")

setwd("/home/sophie/sophTools/files/tables")
print(xtable(skewTab), file="skewTab.txt", include.rownames = F, sanitize.text.function = function(x) x)
```

# BEST METHOD, g fixed, collapse across g
```{r}
# MAPE

## D1
btD1MAPE_p <-bestTable(d=1, agEval = testag, m=4:6, crit="MAPE", f = "median", fixed = "g", collapse = T)
attr(btD1MAPE_p, "subheadings") <- names(btD1MAPE_p)
  
## D2
btD2MAPE_p <-bestTable(d=2, agEval = testag, m=4:6, crit="MAPE", f = "median", fixed = "g", collapse = T)
attr(btD2MAPE_p, "subheadings") <- names(btD2MAPE_p)

## D3
btD3MAPE_p <-bestTable(d=3, agEval = testag, m=4:6, crit="MAPE", f = "median", fixed = "g", collapse = T)
attr(btD3MAPE_p, "subheadings") <- names(btD3MAPE_p)

## D4
btD4MAPE_p <-bestTable(d=4, agEval = testag, m=4:6, crit="MAPE", f = "median", fixed = "g", collapse = T)
attr(btD4MAPE_p, "subheadings") <- names(btD4MAPE_p)

## D5
btD5MAPE_p <-bestTable(d=5, agEval = testag, m=4:6, crit="MAPE", f = "median", fixed = "g", collapse = T)
attr(btD5MAPE_p, "subheadings") <- names(btD5MAPE_p)

# NRMSD

## D1
btD1NRMSD_p <-bestTable(d=1, agEval = testag, m=4:6, crit="NRMSD", f = "median", fixed = "g", collapse = T)
attr(btD1NRMSD_p, "subheadings") <- names(btD1NRMSD_p)
  
## D2
btD2NRMSD_p <-bestTable(d=2, agEval = testag, m=4:6, crit="NRMSD", f = "median", fixed = "g", collapse = T)
attr(btD2NRMSD_p, "subheadings") <- names(btD2NRMSD_p)

## D3
btD3NRMSD_p <-bestTable(d=3, agEval = testag, m=4:6, crit="NRMSD", f = "median", fixed = "g", collapse = T)
attr(btD3NRMSD_p, "subheadings") <- names(btD3NRMSD_p)

## D4
btD4NRMSD_p <-bestTable(d=4, agEval = testag, m=4:6, crit="NRMSD", f = "median", fixed = "g", collapse = T)
attr(btD4NRMSD_p, "subheadings") <- names(btD4NRMSD_p)

## D5
btD5NRMSD_p <-bestTable(d=5, agEval = testag, m=4:6, crit="NRMSD", f = "median", fixed = "g", collapse = T)
attr(btD5NRMSD_p, "subheadings") <- names(btD5NRMSD_p)
```

```{r}
setwd("/home/sophie/sophTools/files/tables")

for(i in 1:5){
  print(xtableList(eval(parse(text = paste("btD",i,"MAPE_p",sep="")))), 
        file = paste("btD",i,"MAPE_p.txt",sep=""),
        include.rownames = F,
        sanitize.text.function = function(x) x)}
  
    print(xtableList(eval(parse(text = paste("btD",i,"NRMSD_p",sep="")))), 
        file = paste("btD",i,"NRMSD_p.txt",sep=""),
        include.rownames = F,
        sanitize.text.function = function(x) x)

```

# GRADIENTS
```{r}
gg <- gradient(agEval = testag, crit = c("MAPE","NRMSE"), f = "median")
gg1 <- gg[[1]][[1]][[2]] # criterion, method, dataset 
gg2 <- gg[[1]][[2]][[2]] # criterion, method, dataset 
#gg3 <- gg[[1]][[3]][[2]] # criterion, method, dataset 

# The maximum slope occurs at the following junction points:
gg1[which.max(gg1[,"slope"]),]
gg2[which.max(gg2[,"slope"]),]
#gg3[which.max(gg3[,"slope"]),]
```



